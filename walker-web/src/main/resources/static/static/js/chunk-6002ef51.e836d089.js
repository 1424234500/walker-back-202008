(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6002ef51"],{5199:function(e,t,n){},b843:function(e,t,n){"use strict";n.r(t);var a,o,i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingCols,expression:"loadingCols"}],staticClass:"div-box-down"},[n("form",{staticClass:"form-inline"},[e._l(e.colMap,(function(t,a){return n("div",{staticClass:"form-group"},[n("label",[e._v(e._s(""==t?a:t))]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.rowSearch[a],expression:"rowSearch[key]"}],staticClass:"form-control",staticStyle:{width:"10em","margin-right":"1em"},attrs:{type:"text",placeholder:a},domProps:{value:e.rowSearch[a]},on:{keyup:function(t){return t.type.indexOf("key")||13===t.keyCode?e.getListPage():null},input:function(t){t.target.composing||e.$set(e.rowSearch,a,t.target.value)}}})])})),e._v(" "),n("el-button",{staticClass:"btn btn-primary",on:{click:function(t){return e.getListPage()}}},[e._v("查询")]),e._v(" "),n("el-button",{staticClass:"btn btn-warning",on:{click:function(t){return e.handlerAddColumn()}}},[e._v("添加")]),e._v(" "),n("el-button",{staticClass:"btn btn-default",on:{click:function(t){e.clearRowSearch(),e.getListPage()}}},[e._v("清除")])],2)]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!e.loadingCols,expression:"!loadingCols"}]},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingList,expression:"loadingList"}],ref:"multipleTable",attrs:{data:e.list,"row-class-name":e.tableRowClassName,"element-loading-text":"Loading",border:"",fit:"",stripe:"","show-summary":"","sum-text":"S","highlight-current-row":"","max-height":"86%"},on:{"selection-change":e.handlerSelectionChange,"sort-change":e.handlerSortChange}},[n("el-table-column",{attrs:{fixed:"left",aligin:"center",type:"selection","min-width":"12px"}}),e._v(" "),n("el-table-column",{attrs:{fixed:"left",align:"center",type:"index","min-width":"12px"}}),e._v(" "),e._l(e.colMap,(function(t,a){return n("el-table-column",{key:a,attrs:{property:a,label:""==t?a:t,sortable:"","show-overflow-tooltip":"","min-width":"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row[t.column.property])+"  ")]}}],null,!0)})})),e._v(" "),n("el-table-column",{attrs:{label:"操作","show-overflow-tooltip":"",fixed:"right","min-width":"180px"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-edit",circle:""},on:{click:function(n){return n.stopPropagation(),e.handlerChange(t.row)}}}),e._v(" "),n("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-tickets",circle:""},on:{click:function(n){return n.stopPropagation(),e.handlerShowDept(t.row)}}}),e._v(" "),n("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-menu",circle:""},on:{click:function(n){return n.stopPropagation(),e.handlerShowRole(t.row)}}}),e._v(" "),n("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(n){return n.stopPropagation(),e.handlerDelete(t.row)}}})]}}])})],2),e._v(" "),e.rowSelect.length>0?n("el-button",{staticClass:"btn btn-danger",staticStyle:{float:"left",margin:"4px 0px 0 2px"},on:{click:function(t){return e.handlerDeleteAll()}}},[e._v("删除选中")]):e._e(),e._v(" "),n("el-pagination",{staticStyle:{float:"right",margin:"10px 20px 0 0"},attrs:{"current-page":e.page.nowpage,"page-size":e.page.shownum,"page-sizes":[2,4,8,16,32,64,128],"pager-count":9,layout:"total, sizes, prev, pager, next, jumper",total:e.page.num,background:""},on:{"current-change":e.handlerCurrentChange,"size-change":e.handlerSizeChange}}),e._v(" "),n("el-dialog",{attrs:{title:"修改",visible:e.loadingUpdate,width:"86%","before-close":e.handlerCancel},on:{"update:visible":function(t){e.loadingUpdate=t}}},[[n("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingSave,expression:"loadingSave"}],ref:"form",attrs:{model:e.rowUpdate,"label-width":"100px"}},[e._l(e.colMap,(function(t,a){return n("el-form-item",{key:a,attrs:{property:a,label:""==t?a:t}},[n("el-input",{attrs:{type:"text"},model:{value:e.rowUpdate[a],callback:function(t){e.$set(e.rowUpdate,a,t)},expression:"rowUpdate[key]"}})],1)})),e._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handlerSave()}}},[e._v("确定")]),e._v(" "),n("el-button",{on:{click:function(t){return e.handlerCancel()}}},[e._v("取消")])],1)],2)]],2),e._v(" "),n("el-dialog",{attrs:{title:"所在部门",visible:e.loadingUpdateDept,width:"86%"},on:{"update:visible":function(t){e.loadingUpdateDept=t}}},[[n("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingDept,expression:"loadingDept"}],ref:"form",attrs:{model:e.rowDept,"label-width":"100px"}},e._l(e.colMapDept,(function(t,a){return n("el-form-item",{key:a,attrs:{disable:"",property:a,label:""==t?a:t}},[n("el-input",{attrs:{disabled:"",type:"text"},model:{value:e.rowDept[a],callback:function(t){e.$set(e.rowDept,a,t)},expression:"rowDept[key]"}})],1)})),1)]],2),e._v(" "),n("el-dialog",{attrs:{title:"拥有的角色",visible:e.loadingUpdateRole,width:"86%"},on:{"update:visible":function(t){e.loadingUpdateRole=t}}},[[e._v("\n        用户角色:\n        "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingRole,expression:"loadingRole"}],ref:"multipleTable",attrs:{data:e.listRole,"row-class-name":e.tableRowClassName,"element-loading-text":"Loading",border:"",fit:"",stripe:"","show-summary":"","sum-text":"S","highlight-current-row":"","max-height":"86%"}},[n("el-table-column",{attrs:{fixed:"left",aligin:"center",type:"selection","min-width":"12px"}}),e._v(" "),n("el-table-column",{attrs:{fixed:"left",align:"center",type:"index","min-width":"12px"}}),e._v(" "),e._l(e.colMapRole,(function(t,a){return n("el-table-column",{key:a,attrs:{property:a,label:""==t?a:t,sortable:"","show-overflow-tooltip":"","min-width":"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(t.row[t.column.property])+"  ")]}}],null,!0)})}))],2),e._v(" "),n("el-button",{staticClass:"btn btn-danger",staticStyle:{float:"left",margin:"4px 0px 0 2px"},on:{click:function(t){return e.handlerSaveAllRoles()}}},[e._v("保存新增的和删除的角色")]),e._v("\n\n        部门角色：\n        "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingRole,expression:"loadingRole"}],ref:"multipleTable",attrs:{data:e.listRoleDept,"row-class-name":e.tableRowClassName,"element-loading-text":"Loading",border:"",fit:"",stripe:"","show-summary":"","sum-text":"S","highlight-current-row":"","max-height":"86%"}},[n("el-table-column",{attrs:{fixed:"left",aligin:"center",type:"selection","min-width":"12px"}}),e._v(" "),n("el-table-column",{attrs:{fixed:"left",align:"center",type:"index","min-width":"12px"}}),e._v(" "),e._l(e.colMapRole,(function(t,a){return n("el-table-column",{key:a,attrs:{property:a,label:""==t?a:t,sortable:"","show-overflow-tooltip":"","min-width":"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(t.row[t.column.property])+"  ")]}}],null,!0)})}))],2)]],2)],1)])},l=[],r=(n("f559"),n("bd86")),s=(o={filters:{statusFilter:function(e){var t={published:"success",draft:"gray",deleted:"danger"};return t[e]}},data:function(){var e;return e={list:[],colMap:{},colKey:"",rowSearch:{},rowUpdate:{},rowUpdateFrom:{},rowSelect:[],page:{nowpage:1,num:0,order:"",pagenum:0,shownum:8},loadingList:!0,loadingCols:!0,loadingSave:!0,loadingUpdate:!1,loadingDept:!1,loadingUpdateDept:!1,rowDept:null,colMapDept:{},colKeyDept:{},loadingRole:!1,loadingUpdateRole:!1},Object(r["a"])(e,"colMapDept",{}),Object(r["a"])(e,"colKeyDept",{}),Object(r["a"])(e,"listRole",[]),Object(r["a"])(e,"listRoleDept",[]),Object(r["a"])(e,"rowSelectRole",[]),e},created:function(){this.getColumns()}},Object(r["a"])(o,"filters",{}),Object(r["a"])(o,"methods",(a={getColumns:function(){var e=this;this.loadingCols=!0,this.get("/common/getColsMap.do",{tableName:"W_USER"}).then((function(t){e.colMap=t.data.colMap,e.colKey=t.data.colKey,e.clearRowSearch(),e.loadingCols=!1,e.getListPage()})).catch((function(){e.loadingCols=!1}))},clearRowSearch:function(){for(var e in this.colMap)this.rowSearch[e]="";this.page.nowpage=1},getListPage:function(){var e=this;this.loadingList=!0;var t=Object.assign({nowPage:this.page.nowpage,showNum:this.page.shownum,order:this.page.order},this.rowSearch);this.get("/user/findPage.do",t).then((function(t){e.list=t.data.data,e.page=t.data.page,e.loadingList=!1})).catch((function(){e.loadingList=!1}))},handlerAddColumn:function(){this.list.push(Object.assign({},this.rowSearch)),this.handlerChange(this.list[this.list.length-1])},handlerChange:function(e){this.loadingUpdate=!this.loadingUpdate,this.loadingSave=!0,console.info("handlerChange "+JSON.stringify(e)),this.rowUpdateFrom=e,this.rowUpdate=JSON.parse(JSON.stringify(e)),this.loadingSave=!1},handlerShowDept:function(e){var t=this;this.loadingUpdateDept=!this.loadingUpdateDept,this.loadingDept=!0,this.rowDept={},this.get("/common/getColsMap.do",{tableName:"W_DEPT"}).then((function(n){t.colMapDept=n.data.colMap,t.colKeyDept=n.data.colKey,t.get("/dept/get.do",{id:e["DEPT_ID"]}).then((function(e){t.rowDept=e.data,t.loadingDept=!1})).catch((function(){t.loadingDept=!1}))})).catch((function(){t.loadingDept=!1}))},handlerShowRole:function(e){var t=this;this.loadingUpdateRole=!this.loadingUpdateRole,this.loadingRole=!0,this.listRole=[],this.get("/common/getColsMap.do",{tableName:"W_ROLE"}).then((function(n){t.colMapRole=n.data.colMap,t.colKeyRole=n.data.colKey,t.get("/role/getRoles.do",e).then((function(e){t.listRole=e.data.list,t.listRoleDept=e.data.listDept,t.loadingRole=!1})).catch((function(){t.loadingRole=!1}))})).catch((function(){t.loadingRole=!1}))},handlerSaveAllRoles:function(){},handlerSelectionChange:function(e){console.info("handlerSelectionChangeRole"+JSON.stringify(e)),this.rowSelectRole=e},handlerCancel:function(){this.loadingUpdate=!this.loadingUpdate},handlerSave:function(){var e=this;console.info("handlerSave "+JSON.stringify(this.rowUpdate)),this.loadingSave=!0,Object.assign(this.rowUpdateFrom,this.rowUpdate);var t=this.rowUpdateFrom;this.post("/user/save.do",t).then((function(t){e.loadingSave=!1,e.loadingUpdate=!e.loadingUpdate})).catch((function(){e.loadingSave=!1}))},handlerDelete:function(e,t){var n=this;this.loadingList=!0;var a={ids:e[this.colKey]};this.get("/user/delet.do",a).then((function(t){for(var a=0;a<n.list.length;a++)n.list[a]==e&&n.list.splice(a,1);n.loadingList=!1})).catch((function(){n.loadingList=!1}))},handlerDeleteAll:function(){var e=this;if(this.rowSelect.length>0){this.loadingList=!0;for(var t="",n=0;n<this.rowSelect.length;n++)t+=this.rowSelect[n][this.colKey]+",";t=t.substring(0,t.length-1);var a={ids:t};this.get("/user/delet.do",a).then((function(t){e.loadingList=!1;for(var n=0;n<e.rowSelect.length;n++)for(var a=0;a<e.list.length;a++)e.list[a]==e.rowSelect[n]&&e.list.splice(a,1);e.rowSelect=[]})).catch((function(){e.loadingList=!1}))}}},Object(r["a"])(a,"handlerSelectionChange",(function(e){console.info("handlerSelectionChange"+JSON.stringify(e)),this.rowSelect=e})),Object(r["a"])(a,"handlerSortChange",(function(e){console.info("handlerSortChange "+JSON.stringify(e)),this.page.order=e.prop+(e.order.startsWith("desc")?" desc":"")})),Object(r["a"])(a,"handlerCurrentChange",(function(e){console.info("handlerCurrentChange"),this.page.nowpage=e,this.getListPage()})),Object(r["a"])(a,"handlerSizeChange",(function(e){this.page.shownum=e,this.getListPage()})),Object(r["a"])(a,"tableRowClassName",(function(e){e.row;var t=e.rowIndex;return 1===t?"warning-row":3===t?"success-row":""})),a)),o),c=s,d=(n("c4d6"),n("2877")),p=Object(d["a"])(c,i,l,!1,null,"5ed496c0",null);t["default"]=p.exports},c4d6:function(e,t,n){"use strict";var a=n("5199"),o=n.n(a);o.a},f559:function(e,t,n){"use strict";var a=n("5ca1"),o=n("9def"),i=n("d2c8"),l="startsWith",r=""[l];a(a.P+a.F*n("5147")(l),"String",{startsWith:function(e){var t=i(this,e,l),n=o(Math.min(arguments.length>1?arguments[1]:void 0,t.length)),a=String(e);return r?r.call(t,a,n):t.slice(n,n+a.length)===a}})}}]);